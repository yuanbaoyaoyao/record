<!--<?xml version="1.0" encoding="UTF-8" ?>-->
<!--<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >-->
<!--<mapper namespace="com.yuanbao.record.mbp.mapper.AdminTokenMapper">-->
<!--    <resultMap id="adminPermissionMap" type="com.yuanbao.record.mbp.mapper.entity.AdminToken">-->
<!--        <id column="id" property="id"></id>-->
<!--        <result column="expiration_time" property="expirationTime"></result>-->
<!--        <result column="admin_user_id" property="adminUserId"></result>-->
<!--        <result column="token" property="token"></result>-->
<!--        <result column="created_at" property="createdAt"></result>-->
<!--        <result column="updated_at" property="updatedAt"></result>-->
<!--        <result column="deleted" property="deleted"></result>-->
<!--        <collection property="role" ofType="com.yuanbao.record.mbp.mapper.entity.AdminUser" javaType="java.util.List">-->
<!--            <id column="id" property="id"></id>-->
<!--            <result column="name" property="name"></result>-->
<!--            <result column="password" property="password"></result>-->
<!--            <result column="avatar" property="avatar"></result>-->
<!--        </collection>-->
<!--    </resultMap>-->
<!--    -->
<!--    <select id="selectByToken" resultType="com.yuanbao.record.mbp.mapper.entity.AdminToken">-->
<!--        SELECT-->
<!--            au.id,-->
<!--            au.NAME,-->
<!--            au.PASSWORD,-->
<!--            au.avatar,-->
<!--            au.created_at,-->
<!--            at.NAME AS role-->
<!--        FROM admin_token at-->
<!--                 INNER JOIN admin_user au ON au.role_id = at.id-->
<!--        WHERE-->
<!--            au.deleted != '1' AND at.deleted != '1'-->
<!--        AND-->
<!--        au.NAME = #{au.name ,jdbcType=VARCHAR}-->
<!--    </select>-->

<!--    <select id="selectByUserId" resultType="com.yuanbao.record.mbp.mapper.entity.AdminToken">-->
<!--        SELECT-->
<!--        *-->
<!--        FROM admin_token AS at-->
<!--        WHERE-->
<!--            at.deleted != '1'-->
<!--          AND-->
<!--            at.admin_user_id = #{at.adminUserId ,jdbcType=VARCHAR}-->
<!--    </select>-->
<!--    <insert id="insert" parameterType="com.yuanbao.record.mbp.mapper.entity.AdminToken">-->
<!--        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">-->
<!--            SELECT LAST_INSERT_ID()-->
<!--        </selectKey>-->
<!--        insert into admin_token-->
<!--        <trim prefix="(" suffix=")" suffixOverrides=",">-->
<!--            <if test="adminUserId!=null">-->
<!--                admin_user_id,-->
<!--            </if>-->
<!--            <if test="expirationTime!=null">-->
<!--                expiration_time,-->
<!--            </if>-->
<!--            <if test="token!=null">-->
<!--                token,-->
<!--            </if>-->
<!--        </trim>-->
<!--        <trim prefix="values (" suffix=")" suffixOverrides=",">-->
<!--            <if test="adminUserId!=null">-->
<!--                #{adminUserId,jdbcType=VARCHAR},-->
<!--            </if>-->
<!--            <if test="expirationTime!=null">-->
<!--                #{expirationTime,jdbcType=VARCHAR},-->
<!--            </if>-->
<!--            <if test="token!=null">-->
<!--                #{token,jdbcType=INTEGER},-->
<!--            </if>-->
<!--        </trim>-->
<!--    </insert>-->

<!--    <update id="updateByPrimaryKey" parameterType="com.yuanbao.record.mbp.mapper.entity.AdminToken">-->
<!--        update admin_token-->
<!--        set admin_user_id     = #{adminUserId,jdbcType=VARCHAR},-->
<!--            expiration_time = #{expirationTime,jdbcType=VARCHAR},-->
<!--            token   = #{token,jdbcType=VARCHAR},-->
<!--        where id = #{id,jdbcType=BIGINT}-->
<!--    </update>-->

<!--</mapper>-->