<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yuanbao.record.mbp.mapper.AdminOperationLogMapper">

    <select id="selectAdminOperationLogListSearch" resultType="com.yuanbao.record.mbp.mapper.entity.AdminOperationLog">
        SELECT
        aol.id,
        aol.admin_user_id,
        aol.ip,
        aol.type,
        aol.action,
        aol.status,
        aol.result,
        aol.created_at
        FROM admin_operation_log aol
        WHERE
        aol.deleted != '1'
        <if test="keyword != 'null'.toString() and keyword != '' ">
            AND
            aol.admin_user_id like concat ('%',#{keyword,jdbcType=VARCHAR},'%')
        </if>
    </select>
    <insert id="insert" parameterType="com.yuanbao.record.mbp.mapper.entity.AdminOperationLog">
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into admin_operation_log
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="adminUserId!=null">
                admin_user_id,
            </if>
            <if test="ip!=null">
                ip,
            </if>
            <if test="type!=null">
                type,
            </if>
            <if test="action!=null">
                action,
            </if>
            <if test="status!=null">
                status,
            </if>
            <if test="result!=null">
                result,
            </if>

        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="adminUserId!=null">
                #{adminUserId,jdbcType=INTEGER},
            </if>
            <if test="ip!=null">
                #{ip,jdbcType=VARCHAR},
            </if>
            <if test="type!=null">
                #{type,jdbcType=INTEGER},
            </if>
            <if test="action!=null">
                #{action,jdbcType=INTEGER},
            </if>
            <if test="status!=null">
                #{status,jdbcType=BOOLEAN},
            </if>
            <if test="result!=null">
                #{result,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>

</mapper>